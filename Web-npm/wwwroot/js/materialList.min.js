var timeout=null,app=vueContext({el:"#app",data:function(){return{filter:{Name:"",OrderByDirection:"Asc",DateFrom:null,DateTo:null,OrderBy:"CreatedAt",OrderByDirection:2,ItemsPerPage:50,MaterialId:0,CategoryId:0,CurrentPage:1,TotalPages:150,Loading:!1},showDetailsModal:!1,showBatchDetailsModal:!1,details:{MaterialId:0,Title:null,IsPaidToPerson:!1,IsDeposit:!1},batchDetails:{BatchId:0,BatchNo:null},businessFilter:{},paymenrRecommendationFilter:{Loading:!1,CurrentPage:1,ItemsPerPage:10},value:null,categories:[],batches:[],items:[]}},watch:{"filter.Title":function(){this.filterChagnedDelayed()}},computed:{},methods:{getList:function(){return apiHandler.Get("material",this.filter).then(n=>{this.items=n.Items,this.filter.TotalPages=n.TotalPages,this.filter.Loading=!1})},getCategories:function(){return apiHandler.Get("category/lookup",{Deleted:!1}).then(n=>{this.categories=n,this.categories.unshift({CategoryId:0,Name:"All"})})},getBatches:function(){return apiHandler.Get("batch/lookup",{Deleted:!1}).then(n=>{this.batches=n})},openMaterialDetailsModal:function(n){n?this.details=Object.assign({},n):this.paymentDetails={IsPaidToPerson:!1,IsDeposit:!1};this.showDetailsModal=!0},openBatchDetailsModal:function(n){this.batchDetails=n?Object.assign({},n):{BatchId:0,BatchNo:null};this.showBatchDetailsModal=!0},closeModal:function(){this.showDetailsModal=!1;this.showBatchDetailsModal=!1},saveMaterial:function(){return this.details.MaterialId>0?apiHandler.Put("material",this.details.MaterialId,this.details).then(()=>{this.showDetailsModal=!1,this.getList()}):apiHandler.Post("material",this.details).then(()=>{this.getList()})},saveBatch:function(){return this.batchDetails.BatchId>0?apiHandler.Put("batch",this.batchDetails.BatchId,this.batchDetails).then(()=>{this.showBatchDetailsModal=!1,this.getBatches()}):apiHandler.Post("batch",this.batchDetails).then(()=>{this.getBatches()})},filterChanged:function(){this.filter.CurrentPage=1;this.getList()},filterChagnedDelayed:function(){clearTimeout(timeout);timeout=setTimeout(()=>{this.filterChanged()},200)},fetchPage:function(n){this.filter.CurrentPage=n.page;this.getList()},updateModelDatepickerValue:function(n){this.paymentDetails.Date=n},setOrderByDirection:function(n){this.filter.OrderByDirection=n},setOrderBy:function(n){this.filter.OrderBy=n}},created:function(){this.getList();this.getCategories();this.getBatches()},mounted:function(){}});