var timeout=null,app=vueContext({el:"#app",components:{"c-check-box":compCheckbox},data:function(){return{filter:{Name:"",OrderByDirection:"Asc",OrderBy:2,ItemsPerPage:50,CurrentPage:1,TotalPages:150,Loading:!1},PaymentTotalDetails:{IsDeposit:!1},businessFilter:{},items:[],searchResultBusinesses:[],loadingAvailableBusinesses:!1}},watch:{"filter.Name":function(){this.filterChagnedDelayed()},"PaymentTotalDetails.Date":function(){console.log(this.PaymentTotalDetails.Date)}},computed:{},methods:{getList:function(){if(!this.filter.Loading)return this.filter.Loading=!0,apiHandler.Get("paymentTotal",this.filter).then(n=>{this.items=n.Items,this.filter.TotalPages=n.TotalPages,this.filter.Loading=!1})},openPaymentDetailsModal:function(n){formvalidation.removeInputErrorClass("PaymentTotalDetails");this.PaymentTotalDetails=n?Object.assign({},n):{IsPaidToPerson:!1,IsDeposit:!1};var t=new bootstrap.Modal(document.getElementById("PaymentTotalDetails"),{keyboard:!1});t.show()},savePayment:function(){if(formvalidation.Validate("PaymentTotalDetails"))return this.PaymentTotalDetails.Date=$("#datepickere").datepicker("getDate"),this.PaymentTotalDetails.PaymentId>0?apiHandler.Post("paymentTotal/"+this.PaymentTotalDetails.PaymentId,this.PaymentTotalDetails).then(()=>{}):apiHandler.Post("paymentTotal/",this.PaymentTotalDetails).then(()=>{})},scanBusiness:function(){if(!(this.PaymentTotalDetails.BusinessName.length<1))return this.loadingAvailableBusinesses=!0,loadHandler.AddGlobalLoader(),this.businessFilter.BusinessName=this.PaymentTotalDetails.BusinessName,apiService.GetList("business/lookup",this.businessFilter).then(n=>{this.searchResultBusinesses=n,$("#searchBusinesses").focus()},n=>{feedback.DisplayError(n)}).always(()=>{loadHandler.RemoveGlobalLoader(),this.loadingAvailableBusinesses=!1})},filterChanged:function(){this.filter.CurrentPage=1;this.getList()},filterChagnedDelayed:function(){clearTimeout(timeout);timeout=setTimeout(()=>{this.filterChanged()},200)}},created:function(){this.getList()},mounted:function(){$("#datepickere").datepicker()}});