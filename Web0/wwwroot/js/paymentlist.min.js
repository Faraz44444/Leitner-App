var timeout=null,app=vueContext({el:"#app",components:{"c-check-box":compCheckbox},data:function(){return{filter:{Name:"",OrderByDirection:"Asc",OrderBy:2,ItemsPerPage:50,CurrentPage:1,TotalPages:150,Loading:!1},paymentDetails:{IsPaidToPerson:!1,IsDeposit:!1},businessFilter:{},categories:[],paymentPriorities:[],items:[],searchResultBusinesses:[],loadingAvailableBusinesses:!1}},watch:{"filter.Name":function(){this.filterChagnedDelayed()},"paymentDetails.Date":function(){console.log(this.paymentDetails.Date)}},computed:{},methods:{getList:function(){if(!this.filter.Loading)return this.filter.Loading=!0,apiHandler.Get("payment",this.filter).then(n=>{this.items=n.Items,this.filter.TotalPages=n.TotalPages,this.filter.Loading=!1})},getCategories:function(){return apiHandler.Get("category/lookup",{Deleted:!1}).then(n=>{this.categories=n})},getPaymentPrioririties:function(){return apiHandler.Get("paymentPriority/lookup",{Deleted:!1}).then(n=>{this.paymentPriorities=n})},openPaymentDetailsModal:function(n){formvalidation.removeInputErrorClass("paymentDetails");this.paymentDetails=n?Object.assign({},n):{IsPaidToPerson:!1,IsDeposit:!1};var t=new bootstrap.Modal(document.getElementById("paymentDetails"),{keyboard:!1});t.show()},savePayment:function(){if(formvalidation.Validate("paymentDetails"))return this.paymentDetails.Date=$("#datepickere").datepicker("getDate"),this.paymentDetails.PaymentId>0?apiHandler.Post("payment/"+this.paymentDetails.PaymentId,this.paymentDetails).then(()=>{}):apiHandler.Post("payment",this.paymentDetails).then(()=>{})},scanBusiness:function(){if(!(this.paymentDetails.BusinessName.length<1))return this.loadingAvailableBusinesses=!0,this.businessFilter.BusinessName=this.paymentDetails.BusinessName,apiHandler.Get("business/lookup",this.businessFilter).then(n=>{this.searchResultBusinesses=n,$("#searchBusinesses").focus()},n=>{feedback.DisplayError(n)})},filterChanged:function(){this.filter.CurrentPage=1;this.getList()},filterChagnedDelayed:function(){clearTimeout(timeout);timeout=setTimeout(()=>{this.filterChanged()},200)}},created:function(){this.getList();this.getCategories();this.getPaymentPrioririties()},mounted:function(){$("#datepickere").datepicker()}});